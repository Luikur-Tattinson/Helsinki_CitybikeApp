@model BikeApp.Models.KeyModel

@{
    ViewData["Title"] = "Home Page";
}

<div id="map" style="height: 400px; width: 100%;"></div>

<script>
    function initMap() {
        var options = {
            zoom: 12,
            center: { lat: 60.19193, lng: 24.91967 }
        };

        var map = new google.maps.Map(document.getElementById('map'), options);

    @if (Model.Stations != null && Model.Stations.Count > 0)
    {
        @foreach (var station in Model.Stations)
        {
            <text>
                var lng = parseFloat('@station.X'.replace(',', '.'));
                var lat = parseFloat('@station.Y'.replace(',', '.'));

                if (!isNaN(lat) && !isNaN(lng)) {
                    new google.maps.Marker({
                        position: { lat: lat, lng: lng },
                        map: map
                    });
                }
            </text>
        }
    }
        }
</script>

<script async defer src="https://maps.googleapis.com/maps/api/js?key=@Model?.Key&callback=initMap"></script>
